{% block courses %}
<input id="profile-code" value="{{ profile_code }}" class="hidden">
    <div id="courses-main-container" class="w-full space-y-3 px-48 bg-yellow-accent">
        <p class="text-4xl font-bold"> {{ program_name }} </p>
        <div id="pickable-courses" class="sticky top-0 transition ease z-10">
            <div class="flex justify-between items-end">
                <div>
                    <p class="font-bold text-lg">Välj termin</p>
                    <div class="flex border-2 border-black/10 rounded-lg overflow-hidden">
                        <button id="semester-btn-7" onclick="get_courses_semester(this.value); load_chosen_courses(this.value); highlight_semester_card('semester-' + this.value + '-card')" class="bg-slate-800 p-3 cursor-default text-white transition ease-in-out" value="7" type="submit">Termin 7</button>
                        <button id="semester-btn-8" onclick="get_courses_semester(this.value); load_chosen_courses(this.value); highlight_semester_card('semester-' + this.value + '-card')" class="bg-slate-200 p-3 text-black/75 transition ease-in-out hover:bg-slate-500 hover:text-white" value="8" type="submit">Termin 8</button>
                        <button id="semester-btn-9" onclick="get_courses_semester(this.value); load_chosen_courses(this.value); highlight_semester_card('semester-' + this.value + '-card')" class="bg-slate-200 p-3 text-black/75 transition ease-in-out hover:bg-slate-500 hover:text-white" value="9" type="submit">Termin 9</button>
                    </div>
                </div>
                
                <form action="{% url 'home' %}" method="POST" class="flex h-full">
                    {% csrf_token %}
                    {{ form.profiles }}
                    <button class="bg-slate-600 text-white p-3 transition ease-in-out duration-300 hover:bg-slate-900 rounded-br-lg rounded-tr-lg" name="pick_profile" type="submit">Välj profil</button>
                </form>
                <div>
                    <p class="font-bold text-lg"> Välj period: </p>
                    <div class="flex border-2 border-black/10 rounded-lg overflow-hidden">
                        <button id="period-1-btn" onclick="toggle_period(this.value)" value="1" data-toggled="true" class="bg-slate-800 p-3 text-white transition ease-in-out" type="submit">Period 1</button>
                        <button id="period-2-btn" onclick="toggle_period(this.value)" value="2" data-toggled="true" class="bg-slate-800 p-3 text-white transition ease-in-out" type="submit">Period 2</button>
                    </div>
                </div>
            </div>
            <table id="pop-up-row" class="table hidden absolute px-20 bg-slate-600 rounded-t-md rounded-b-none overflow-hidden w-full shadow-md">
                <thead id="my-course-head-1">
                    <tr class="text-white text-lg text-center">
                        <td>Välj</td>
                        <td>Kurskod</td>
                        <td class="text-left">Kursnamn</td>
                        <td>Hp</td>
                        <td>Block</td>
                        <td>Nivå</td>
                        <td>Vof</td>
                        <td>Detaljer</td>
                    </tr>
                </thead>
                <tbody class="text-sm">
                    <tr style="visibility:collapse;" class="invisible">
                        <td>Välj</td>
                        <td>Kurskod</td>
                        <td class="text-left w-2/5">LÅNGT KURSNAMN 123123</td>
                        <td>Hp</td>
                        <td>Block</td>
                        <td>Nivå</td>
                        <td>Vof</td>
                        <td>Detaljer</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="flex">
            <p class="text-2xl font-bold">Profil Vald: &nbsp</p>
            <p class="text-2xl"> {{ profile_name }} </p>
        </div>
        <div id="tables-container" class="flex flex-col">
            {% for period, schedulers in period_scheduler.items %}
            <div id="period-{{period}}">
                <table class="table rounded-md overflow-hidden mb-10">
                <thead class="bg-slate-600 text-white text-lg">
                    <tr>
                        <th class="text-center">Välj</th>
                    {% for tag, x in course_tags.items %}
                        {% if tag != "Kursnamn" %}
                            <th class="text-center">
                                {{ tag }}
                            </th>
                        {% else %}
                            <th>
                                {{ tag }}
                            </th>
                        {% endif %}

                    {% endfor %}
                    </tr>
                    <tr class="bg-slate-100 text-black">
                        <th colspan="8"> Period {{period}} </th>
                    </tr>

                </thead>
                    <tbody id="table-{{period}}" class="text-sm font-bold" >
                        {% for scheduler in schedulers %}
                        <tr class="bg-white transition ease-in-out hover:bg-slate-200 text-center font-bold text-sm">
                            <td class="flex justify-center">
                                <input id="check-{{scheduler.scheduler_id}}" type="checkbox" onclick="add_course(this.value)" class="checkbox flex checkbox-warning transition ease-in-out border-none bg-slate-300 hover:bg-slate-500 focus:ring-transparent" value="{{scheduler.scheduler_id}}">
                            </td>
                        
                            <td class="font-mono"> {{scheduler.course.course_code}} </td>
                            <td class="text-left w-2/5"> 
                                <a href="https://studieinfo.liu.se/kurs/{{ scheduler.course.course_code }}" class="hover:text-yellow-500 transition ease">
                                    {{scheduler.course.course_name}} 
                                </a>
                            </td>
                            <td> {{scheduler.course.hp}} </td>
                            <td> {{scheduler.schedule.block}} </td>
                            <td> {{scheduler.course.level}} </td>
                            <td> {{scheduler.course.vof}} </td>

                            <td class="flex justify-center">
                                <label class="swap bg-slate-300 rounded-md transition ease-in-out drop-shadow-sm hover:bg-yellow-500 ">
                                    <input class="hidden" type="checkbox" onclick="load_course_info(this.name, this.value)" value="{{scheduler.scheduler_id}}" name="{{scheduler.course.course_code}}" id="scheduler-{{scheduler.scheduler_id}}"/>
                                    <span class="material-symbols-outlined swap-on rounded-lg bg-yellow-500 ">
                                        keyboard_arrow_up
                                    </span>
                                
                                    <span class="material-symbols-outlined swap-off ">
                                        expand_more
                                    </span>
                                </label>
                            </td>
                        </tr>
                            <tr id="dropdown-{{scheduler.course.course_code}}">
                                <td class="overflow-hidden p-0" colspan="8" id="insert-{{scheduler.course.course_code}}">
                                    <div id="course-info-container-{{scheduler.scheduler_id}}" class="hidden overflow-hidden">
                                        <div class="flex border-x-2 border-x-stone-100 border-t-2 border-t-stone-200 p-5 shadow-md bg-white mb-5 rounded-b-lg">
                                            <span id="courses-loader-{{scheduler.scheduler_id}}" class"hidden">
                                                <button class="btn">
                                                    <span class="loading loading-spinner"></span>
                                                        Laddar
                                                    </button>
                                            </span>
                                            <div id="info-container-{{scheduler.scheduler_id}}" class="flex flex-col p-5 border-r-2 w-1/2 border-black/25">
                                            </div>

                                            <div id="examination-container-{{scheduler.scheduler_id}}" class="flex flex-col p-5 space-y-2">
                                            </div>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        {% endfor %}

                    </tbody>
                </table>
            </div>
            {% endfor %}
        </div>
        </div>
    </div>
</div>
{% endblock %}